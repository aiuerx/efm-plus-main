<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EFM Radio</title>
  <meta name="description" content="Radio shows, mixes, and archives from EFM." />
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    :root { --bg:#0b0b0b; --fg:#f3f3f3; --muted:#b3b3b3; --card:#121212; --border:#2a2a2a; }
    * { box-sizing: border-box; }
    html, body { height:100%; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg); }
    a { color:#0f62fe; text-decoration:none; }
    a:hover { text-decoration:underline; }

    .wrap { max-width:1100px; margin:0 auto; padding:24px; }

    /* Header */
    header {
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:18px 0; border-bottom:1px solid var(--border);
      position:sticky; top:0;
      backdrop-filter:saturate(120%) blur(6px);
      -webkit-backdrop-filter:saturate(120%) blur(6px);
      background:rgba(11,11,11,0.7); /* make this var(--bg) if you want it fully opaque */
      z-index:1000;                  /* keep header above all content */
      isolation:isolate;             /* new stacking context for safety */
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .site-name { font-weight:700; font-size:20px; letter-spacing:.02em; line-height:1; }
    nav a { color:var(--muted); margin-left:16px; font-size:14px; }
    nav a:hover { color:var(--fg); }

    /* Page intro (match Resources) */
    .hero { padding:40px 0 16px; }
    .hero h1 {
      font-size: clamp(28px, 5.5vw, 56px);
      line-height:.95;
      letter-spacing:-.01em;
      margin:0 0 12px;
    }
    .section-divider {
      height:1px;
      margin:24px 0;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);
    }
    p.muted { color:var(--muted); margin:0; }

    /* CTA buttons */
    .btn {
      display:inline-block; background:#fff; color:#111; padding:10px 14px;
      border-radius:12px; font-size:14px; font-weight:600; text-decoration:none;
      border:1px solid #e6e6e6; transition: filter .15s ease, transform .02s;
    }
    .btn:hover { filter:brightness(.96); transform:translateY(-1px); }

    /* Filters + sort */
    .filters { display:flex; align-items:center; gap:8px; margin-top:18px; flex-wrap:wrap; }
    .filter-btn {
      background:#121212; border:1px solid #2a2a2a; color:#f3f3f3;
      padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
      transition:border-color .15s ease, background-color .15s ease;
    }
    .filter-btn:hover { border-color:#3a3a3a; }
    .filter-btn.is-active { background:#fff; color:#111; border-color:#e6e6e6; }
    .sort { margin-top:10px; }
    #sortOrder { background:#121212; border:1px solid #2a2a2a; color:#f3f3f3; border-radius:8px; padding:6px 8px; font-size:12px; }

    /* Featured + lists */
    .featured,
    .show {
      background:#121212; border:1px solid #2a2a2a; border-radius:12px;
      padding:18px;
      transition:border-color .2s ease, background-color .2s ease, transform .02s;
      position:relative; z-index:0; /* baseline */
    }
    .featured:hover,
    .show:hover { border-color:#3a3a3a; background:#151515; transform:translateY(-1px); z-index:1; }

    .featured { border-radius:16px; padding:18px; margin-top:16px; }
    .featured h2 { margin:0 0 10px; font-size:22px; font-weight:700; }
    .featured .meta { color:var(--muted); font-size:14px; margin:0 0 10px; }
    .links a { margin-right:12px; font-size:14px; }
    .links a:hover { text-decoration:underline; opacity:.9; }

    .year {
      margin:40px 0 14px;
      font-size:18px;
      font-weight:600;
      letter-spacing:0.08em;
      text-transform:uppercase;
      color:var(--muted);
    }
    .show-list { display:grid; gap:20px; }
    .show {
      background:#121212; border:1px solid #2a2a2a; border-radius:12px; padding:16px;
      transition:border-color .2s ease, background-color .2s ease, transform .02s;
    }
    .show:hover { border-color:#3a3a3a; background:#151515; transform:translateY(-1px); }
    .show h3 { margin:0 0 8px; font-size:17px; font-weight:600; }
    .show p  { margin:0 0 12px; color:var(--muted); font-size:14px; line-height:1.5; }

    /* Footer */
    footer { border-top:1px solid var(--border); margin-top:36px; padding:18px 0; color:var(--muted); font-size:12px; }
    .hidden { display:none !important; }

    /* Back to top */
    html { scroll-behavior: smooth; }
    #backToTop {
      display:none;
      position:fixed;
      bottom:24px;
      right:24px;
      background:#fff;
      color:#111;
      border:none;
      border-radius:50%;
      width:40px;
      height:40px;
      font-size:18px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,0.3);
      transition:opacity .2s ease;
      z-index:50;
    }
    #backToTop:hover { opacity:0.85; }

    /* Year buttons */
    .year-btn {
      background:#121212; border:1px solid #2a2a2a; color:#f3f3f3;
      padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
      transition:border-color .15s ease, background-color .15s ease;
    }
    .year-btn:hover { border-color:#3a3a3a; }
    .year-btn.is-active { background:#fff; color:#111; border-color:#e6e6e6; }

    /* Playlist links */
    .playlist-links {
      margin:6px 0 0;
      font-size:13px;
    }
    .playlist-links a {
      color:var(--muted);
      text-decoration:none;
    }
    .playlist-links a:hover {
      color:var(--fg);
      text-decoration:underline;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header id="top">
      <div class="brand">
        <div class="site-name">EFM</div>
      </div>
      <nav>
        <a href="/">Home</a>
        <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">Signal Notes</a>
        <a href="/resources.html">Resources</a>
        <a href="/#subscribe">Subscribe</a>
      </nav>
    </header>

    <main>
      <section class="hero">
        <h1>Latest show</h1>
        <div class="playlist-links">
          <a href="https://soundcloud.com/efmplus/sets/efm-radio" target="_blank" rel="noopener">All on SoundCloud</a>
          <span style="margin:0 6px; color:var(--muted);">‚Ä¢</span>
          <a href="https://youtube.com/playlist?list=PLx2FKwyN8ExD4aL7sIL0xsAcdqOI9A3cJ&si=Be-SZnuMA1GhBSs1" target="_blank" rel="noopener">All on YouTube</a>
        </div>
      </section>

      <div class="section-divider"></div>

      <!-- Featured card -->
      <div class="featured">
        <h2>Lot Radio w/ Peter Jurado ‚Äî August 29 2025</h2>
        <p class="meta">EFM invites Peter Jurado for a free-form session of soul, funk, disco, house and everything in between.</p>
        <div class="links">
          <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-08-29-2025" target="_blank" rel="noopener">SoundCloud</a>
          <a href="https://www.youtube.com/watch?v=YmGXl49k6l0" target="_blank" rel="noopener">YouTube</a>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters">
        <strong style="font-size:14px;color:#b3b3b3;">Filter:</strong>
        <button class="filter-btn is-active" data-filter="">All</button>
        <button class="filter-btn" data-filter="lot-radio">Lot Radio</button>
        <button class="filter-btn" data-filter="guest-mix">Guest Mix</button>
        <button class="filter-btn" data-filter="studio">Studio</button>
        <button class="filter-btn" data-filter="live-set">Live Set</button>

        <strong style="margin-left:16px; font-size:14px; color:#b3b3b3;">Year:</strong>
        <button class="year-btn is-active" data-year="">All</button>
        <button class="year-btn" data-year="2025">2025</button>
        <button class="year-btn" data-year="2024">2024</button>
      </div>

      <!-- Sort -->
      <div class="sort">
        <label for="sortOrder" style="font-size:12px;color:#b3b3b3;margin-right:8px;">Sort:</label>
        <select id="sortOrder">
          <option value="newest" selected>Newest first</option>
          <option value="oldest">Oldest first</option>
        </select>
      </div>

      <!-- 2025 -->
      <h2 class="year">2025</h2>
      <div class="show-list">
        <div class="show" data-tags="lot-radio guest-mix" data-date="2025-08-01">
          <h3>Lot Radio w/ JR2k ‚Äî August 01 2025</h3>
          <p>EFM invites Floorspeed Records‚Äô JR2k (Jackson Ryland) for a hard-hitting techno session.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-jr2k-the-lot-radio-08" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/zjRoc8hejQo" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2025-07-06">
          <h3>Lot Radio w/ Joeyjoey ‚Äî July 06 2025</h3>
          <p>EFM invites Joeyjoey for a session of ambient, glitch, and downtempo music.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-joeyjoey-the-lot" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/UFlNO7vNEuI" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2025-06-06">
          <h3>Lot Radio ‚Äî June 06 2025</h3>
          <p>Eclectic mix of house, electronica, and techno ‚Äî all on wax.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-06-06-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/nOESV88iMiE" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2025-05-09">
          <h3>Lot Radio ‚Äî May 09 2025</h3>
          <p>Two hours of straight techno.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-05-09-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/cd1btVzw0CI" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2025-04-11">
          <h3>Lot Radio ‚Äî April 11 2025</h3>
          <p>Mellow late-night set for quiet nights and slow drives.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-04-11-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/4cIuYfd1ZV0" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2025-03-14">
          <h3>Lot Radio w/ mvns ‚Äî March 14 2025</h3>
          <p>mvns focuses on lesser-known Japanese and Indonesian music alongside newer releases.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-mvns-the-lot-radio-03" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/KEceRagw2i0" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2025-01-17">
          <h3>Lot Radio w/ Will August Park ‚Äî January 17 2025</h3>
          <p>EFM invites the brilliant musician Will August Park.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-will-august-park-the-lot-radio-01-17-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/1YXkg7VcUAU" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
      </div>

      <!-- 2024 -->
      <h2 class="year">2024</h2>
      <div class="show-list">
        <div class="show" data-tags="lot-radio" data-date="2024-11-22">
          <h3>Lot Radio ‚Äî November 22 2024</h3>
          <p>Dub, house, soul, funk, electronica ‚Äî favorites across the spectrum.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-11-22-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/ZWUiPM1Po78" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2024-10-25">
          <h3>Lot Radio w/ LINDA ‚Äî October 25 2024</h3>
          <p>EFM invites LINDA for a session focused on funky, groovy techno.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-linda-the-lot-radio-10-25-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/QZP82-tQvyM" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-09-27">
          <h3>Lot Radio ‚Äî September 27 2024</h3>
          <p>Electronica, IDM, techno, and house tunes.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-09-27-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/Y2l0CjY8EZ4" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-08-30">
          <h3>Lot Radio ‚Äî August 30 2024</h3>
          <p>Techno, electronica, and IDM session.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-08-30-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/Y2Lg03-iwrw" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-08-02">
          <h3>Lot Radio ‚Äî August 02 2024</h3>
          <p>From groovy house to peaking techno.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-08-02-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/2ZZ_-XC_DdA" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2024-07-19">
          <h3>Lot Radio w/ Colloboh ‚Äî July 19 2024</h3>
          <p>EFM invites the inimitable Colloboh.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-colloboh-the-lot-radio-07-19-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-06-07">
          <h3>Lot Radio ‚Äî June 07 2024</h3>
          <p>Glitch, IDM, electronica, and sparse dance music.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-06-07-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/zesM1xcSxrw" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-05-10">
          <h3>Lot Radio ‚Äî May 10 2024</h3>
          <p>Jubilant session of weirdo house and IDM.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-05-10-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/pPsRZTKp2z4" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix live-set" data-date="2024-04-13">
          <h3>Lot Radio w/ Henry Solomon & Logan Kane ‚Äî April 13 2024</h3>
          <p>Minaret Records takeover: sharing ‚ÄúOutside World 3,‚Äù eclectic jazz gems, and a live session.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-henry-solomon-and-logan-kane-the-lot-radio-04-13-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/Fn1pZM5x4ik" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2024-03-15">
          <h3>Lot Radio w/ Afrikan Sciences ‚Äî March 15 2024</h3>
          <p>Legendary Afrikan Sciences: funk, dance, and eclectic music for the soul.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-afrikan-sciences-the-lot-radio-03-15-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/b39mZ6oMqU0" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio guest-mix" data-date="2024-02-16">
          <h3>Lot Radio w/ Buzzi ‚Äî February 16 2024</h3>
          <p>Hard techno with Buzzi.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-with-buzzi-the-lot-radio-02-16-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/SK4x9mxHC7g" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="lot-radio" data-date="2024-01-19">
          <h3>Lot Radio ‚Äî January 19 2024</h3>
          <p>Sounds, systems & techniques.</p>
          <div class="links">
            <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-01-19-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtu.be/FD4wuNybzIA" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
      </div>
    </main>

    <footer>
      ¬© <span id="year"></span> EFM.
      <br/>
      <span style="color:var(--muted); font-size:12px; display:inline-block; margin-top:6px;">
        üí¨ Do you have tips, suggestions, or something interesting to share?<br/>
        Get in touch: <a href="mailto:notes@efm.plus" style="color:var(--fg);">notes@efm.plus</a>
      </span>
    </footer>
  </div>

  <!-- Filtering + Sorting + Shareable URL -->
  <script>
    // year stamp
    document.getElementById('year').textContent = new Date().getFullYear();

    // include all filters you expose in the UI:
    const ALLOWED_TAGS  = ["", "lot-radio", "guest-mix", "studio", "live-set"]; // "" = All
    const ALLOWED_SORTS = ["newest", "oldest"];

    function getParam(name, fallback) {
      const v = new URLSearchParams(location.search).get(name) || fallback;
      return v;
    }
    function setParams(params) {
      const u = new URL(location);
      Object.entries(params).forEach(([k, v]) => {
        if (v === "" || v == null) u.searchParams.delete(k);
        else u.searchParams.set(k, v);
      });
      history.replaceState(null, "", u);
    }

    // cache refs
    const buttons = Array.from(document.querySelectorAll('.filter-btn'));
    const years   = Array.from(document.querySelectorAll('.year'));
    const lists   = Array.from(document.querySelectorAll('.show-list'));
    const sortSel = document.getElementById('sortOrder');
    const shows   = () => Array.from(document.querySelectorAll('.show-list .show'));

    // FILTER
    function applyFilter(tag) {
      buttons.forEach(b => b.classList.toggle('is-active', (b.dataset.filter || '') === tag));
      shows().forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').split(/\s+/);
        const match = !tag || tags.includes(tag);
        card.classList.toggle('hidden', !match);
      });
      lists.forEach((list, i) => {
        const visible = list.querySelectorAll('.show:not(.hidden)').length > 0;
        years[i].classList.toggle('hidden', !visible);
        list.classList.toggle('hidden', !visible);
      });
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tag = btn.dataset.filter || "";
        applyFilter(tag);
        setParams({ tag, sort: sortSel?.value || "newest" });
      });
    });

    // SORT
    function sortShows(order) {
      const dir = order === 'oldest' ? 1 : -1;
      lists.forEach(list => {
        const cards = Array.from(list.querySelectorAll('.show'));
        cards.sort((a, b) => {
          const da = new Date(a.getAttribute('data-date') || 0).getTime();
          const db = new Date(b.getAttribute('data-date') || 0).getTime();
          return (db - da) * (dir === -1 ? 1 : -1);
        });
        cards.forEach(c => list.appendChild(c));
      });
      const container = lists[0].parentElement;
      const groups = years.map((y, i) => ({ yearEl: y, listEl: lists[i] }));
      groups.sort((g1, g2) => {
        const top1 = g1.listEl.querySelector('.show');
        const top2 = g2.listEl.querySelector('.show');
        const d1 = top1 ? new Date(top1.getAttribute('data-date') || 0).getTime() : 0;
        const d2 = top2 ? new Date(top2.getAttribute('data-date') || 0).getTime() : 0;
        return (d2 - d1) * (dir === -1 ? 1 : -1);
      });
      groups.forEach(g => { container.appendChild(g.yearEl); container.appendChild(g.listEl); });
    }

    sortSel?.addEventListener('change', () => {
      const order = sortSel.value;
      sortShows(order);
      const activeBtn = document.querySelector('.filter-btn.is-active');
      const tag = activeBtn ? (activeBtn.getAttribute('data-filter') || '') : '';
      applyFilter(tag);
      setParams({ tag, sort: order });
    });

    // INITIAL: read URL params
    const initTag  = ALLOWED_TAGS.includes(getParam("tag", "")) ? getParam("tag", "") : "";
    const initSort = ALLOWED_SORTS.includes(getParam("sort","")) ? getParam("sort","newest") : "newest";

    if (sortSel) sortSel.value = initSort;
    sortShows(initSort);
    applyFilter(initTag);
    setParams({ tag: initTag, sort: initSort });
  </script>

  <!-- Floating back-to-top -->
  <button id="backToTop" title="Back to top">‚Üë</button>
  <script>
    const btn = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      btn.style.display = (document.documentElement.scrollTop > 400) ? "block" : "none";
    });
    btn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Year filter integration
    const yearButtons = Array.from(document.querySelectorAll('.year-btn'));
    function applyFilters(tag, year) {
      buttons.forEach(b => b.classList.toggle('is-active', (b.dataset.filter || '') === tag));
      yearButtons.forEach(b => b.classList.toggle('is-active', (b.dataset.year || '') === year));

      shows().forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').split(/\s+/);
        const showDate = new Date(card.getAttribute('data-date'));
        const showYear = showDate.getFullYear().toString();

        const tagMatch = !tag || tags.includes(tag);
        const yearMatch = !year || showYear === year;

        card.classList.toggle('hidden', !(tagMatch && yearMatch));
      });

      lists.forEach((list, i) => {
        const visible = list.querySelectorAll('.show:not(.hidden)').length > 0;
        years[i].classList.toggle('hidden', !visible);
        list.classList.toggle('hidden', !visible);
      });
    }

    yearButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tag = document.querySelector('.filter-btn.is-active')?.dataset.filter || '';
        const year = btn.dataset.year || '';
        applyFilters(tag, year);
        setParams({ tag, year, sort: sortSel?.value || "newest" });
      });
    });

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tag = btn.dataset.filter || '';
        const year = document.querySelector('.year-btn.is-active')?.dataset.year || '';
        applyFilters(tag, year);
        setParams({ tag, year, sort: sortSel?.value || "newest" });
      });
    });

    const initYear = getParam("year", "");
    applyFilters(initTag, initYear);
    setParams({ tag: initTag, year: initYear, sort: initSort });
  </script>
</body>
</html>
