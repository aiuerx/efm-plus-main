<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EFM Radio</title>
  <meta name="description" content="Radio shows, mixes, and archives from EFM." />
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    :root { --bg:#0b0b0b; --fg:#f3f3f3; --muted:#b3b3b3; --card:#121212; --border:#2a2a2a; }
    * { box-sizing: border-box; }
    html, body { height:100%; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg); }
    a { color:#0f62fe; text-decoration:none; }
    a:hover { text-decoration:underline; }

    .wrap { max-width:1100px; margin:0 auto; padding:24px; }

    /* Header (match landing) */
    header {
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:18px 0; border-bottom:1px solid var(--border);
      position:sticky; top:0; backdrop-filter:saturate(120%) blur(6px); background:rgba(11,11,11,0.7);
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .site-name { font-weight:700; font-size:20px; letter-spacing:.02em; line-height:1; }
    nav a { color:var(--muted); margin-left:16px; font-size:14px; }
    nav a:hover { color:var(--fg); }

    /* Page intro */
    /* Page intro — match Resources */
h1 {
  font-size: clamp(28px, 5.5vw, 56px);
  line-height: .95;
  letter-spacing: -0.01em;
  margin: 24px 0 12px;
}
    p.muted { color:var(--muted); margin:0; }

    /* CTA buttons */
    .btn {
      display:inline-block; background:#fff; color:#111; padding:10px 14px;
      border-radius:12px; font-size:14px; font-weight:600; text-decoration:none;
      border:1px solid #e6e6e6; transition: filter .15s ease, transform .02s;
    }
    .btn:hover { filter:brightness(.96); transform:translateY(-1px); }

    /* Filters + sort */
    .filters { display:flex; align-items:center; gap:8px; margin-top:18px; flex-wrap:wrap; }
    .filter-btn {
      background:#121212; border:1px solid #2a2a2a; color:#f3f3f3;
      padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
      transition:border-color .15s ease, background-color .15s ease;
    }
    .filter-btn:hover { border-color:#3a3a3a; }
    .filter-btn.is-active { background:#fff; color:#111; border-color:#e6e6e6; }
    .sort { margin-top:10px; }
    #sortOrder { background:#121212; border:1px solid #2a2a2a; color:#f3f3f3; border-radius:8px; padding:6px 8px; font-size:12px; }

    /* Featured + lists */
    .featured {
  margin-top:28px; /* was 20px, gives more breathing room */
  background:#121212;
  border:1px solid #2a2a2a;
  border-radius:16px;
  padding:18px;
  transition:border-color .2s ease, background-color .2s ease, transform .02s;
}
    .featured:hover { border-color:#3a3a3a; background:#151515; transform:translateY(-1px); }
    .featured h2 { margin:0 0 10px; font-size:22px; font-weight:700; }
    .featured .meta { color:var(--muted); font-size:14px; margin:0 0 10px; }
    .links a { margin-right:12px; font-size:14px; }
    .links a:hover { text-decoration:underline; opacity:.9; }

    .year {
  margin:40px 0 14px;
  font-size:18px;
  font-weight:600;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:var(--muted);
}
    .show-list { display:grid; gap:20px; }
    .show {
      background:#121212; border:1px solid #2a2a2a; border-radius:12px; padding:16px;
      transition:border-color .2s ease, background-color .2s ease, transform .02s;
    }
    .show:hover { border-color:#3a3a3a; background:#151515; transform:translateY(-1px); }
    .show h3 { margin:0 0 8px; font-size:17px; font-weight:600; }
    .show p  { margin:0 0 12px; color:var(--muted); font-size:14px; line-height:1.5; }

    /* Footer */
    footer { border-top:1px solid var(--border); margin-top:36px; padding:18px 0; color:var(--muted); font-size:12px; }
    .hidden { display:none !important; }

    .backtotop {
  font-size:12px;
  color:var(--muted);
  text-decoration:none;
}
.backtotop:hover { color:var(--fg); text-decoration:underline; }

    html {
  scroll-behavior: smooth;
}

    #backToTop {
  display:none;
  position:fixed;
  bottom:24px;
  right:24px;
  background:#fff;
  color:#111;
  border:none;
  border-radius:50%;
  width:40px;
  height:40px;
  font-size:18px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  transition:opacity .2s ease;
  z-index:50;
}
#backToTop:hover { opacity:0.85; }

    .year-btn {
  background:#121212; border:1px solid #2a2a2a; color:#f3f3f3;
  padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
  transition:border-color .15s ease, background-color .15s ease;
}
.year-btn:hover { border-color:#3a3a3a; }
.year-btn.is-active { background:#fff; color:#111; border-color:#e6e6e6; }

.playlist-links {
  margin:6px 0 18px;
  font-size:13px;
}
.playlist-links a {
  color:var(--muted);
  text-decoration:none;
}
.playlist-links a:hover {
  color:var(--fg);
  text-decoration:underline;
}
    .hero { padding:40px 0 10px; }
.hero h1 {
  font-size: clamp(28px, 5.5vw, 56px);
  line-height:.95;
  letter-spacing:-.01em;
  margin:0 0 12px;
}

    
  </style>
</head>
<body>
  <div class="wrap">
    <header id="top">
      <div class="brand">
        <div class="site-name">EFM</div>
      </div>
      <nav>
        <a href="/">Home</a>
        <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">Signal Notes</a>
        <a href="/resources.html">Resources</a>
        <a href="/#subscribe">Subscribe</a>
      </nav>
    </header>

   <main>
  <section class="hero">
    <h1>Latest show</h1>

    <!-- Playlist CTAs -->
    <div class="playlist-links">
      <a href="https://soundcloud.com/YOUR_HANDLE/sets/YOUR_PLAYLIST_SLUG" target="_blank" rel="noopener">All on SoundCloud</a>
      <span style="margin:0 6px; color:var(--muted);">•</span>
      <a href="https://www.youtube.com/playlist?list=YOUR_YT_PLAYLIST_ID" target="_blank" rel="noopener">All on YouTube</a>
    </div>
  </section>

      <!-- Featured card -->
      <div class="featured">
        <h2>Lot Radio — August 29 2025</h2>
        <p class="meta">EFM invites Peter Jurado for a free-form session of soul, funk, disco, house and everything in between.</p>
        <div class="links">
          <a href="https://soundcloud.com/thelotradio/efm-the-lot-radio-08-29-2025" target="_blank" rel="noopener">SoundCloud</a>
          <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters">
        <strong style="font-size:14px;color:#b3b3b3;">Filter:</strong>
        <button class="filter-btn is-active" data-filter="">All</button>
        <button class="filter-btn" data-filter="lot-radio">Lot Radio</button>
        <button class="filter-btn" data-filter="guest-mix">Guest Mix</button>
        <button class="filter-btn" data-filter="studio">Studio</button>
          <!-- Year filter -->
        <strong style="margin-left:16px; font-size:14px; color:#b3b3b3;">Year:</strong>
        <button class="year-btn is-active" data-year="">All</button>
        <button class="year-btn" data-year="2025">2025</button>
        <button class="year-btn" data-year="2024">2024</button>
      </div>

      <!-- Sort -->
      <div class="sort">
        <label for="sortOrder" style="font-size:12px;color:#b3b3b3;margin-right:8px;">Sort:</label>
        <select id="sortOrder">
          <option value="newest" selected>Newest first</option>
          <option value="oldest">Oldest first</option>
        </select>
      </div>

      <!-- 2025 -->
      <h2 class="year">2025</h2>
      <div class="show-list">
        <div class="show" data-tags="lot-radio" data-date="2025-07-10">
          <h3>Lot Radio — July 2025</h3>
          <p>Deep set exploring synthesis and texture.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/lot-radio-july-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
         <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
         <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
         <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
         <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
         <div class="show" data-tags="guest-mix" data-date="2025-06-02">
          <h3>Guest Mix — June 2025</h3>
          <p>Guest slot, late-night, slower tempos.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/guest-mix-june-2025" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
      </div>

      <!-- 2024 -->
      <h2 class="year">2024</h2>
      <div class="show-list">
        <div class="show" data-tags="lot-radio studio" data-date="2024-12-12">
          <h3>Lot Radio — December 2024</h3>
          <p>Industrial accents + melodic negatives.</p>
          <div class="links">
            <a href="https://soundcloud.com/YOUR_HANDLE/lot-radio-dec-2024" target="_blank" rel="noopener">SoundCloud</a>
            <a href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
      </div>
    </main>

   <footer>
  © <span id="year"></span> EFM.
  <br/>
  <span style="color:var(--muted); font-size:12px; display:inline-block; margin-top:6px;">
    💬 Do you have tips, suggestions, or something interesting to share?<br/>
    Get in touch: <a href="mailto:notes@efm.plus" style="color:var(--fg);">notes@efm.plus</a>
  </span>
</footer>

  </div>

  <!-- Filtering + Sorting + Shareable URL -->
  <script>
    // year stamp
    document.getElementById('year').textContent = new Date().getFullYear();

    // --- URL state: allowed params
    const ALLOWED_TAGS  = ["", "lot-radio", "guest-mix", "studio"]; // "" = All
    const ALLOWED_SORTS = ["newest", "oldest"];

    function getParam(name, fallback) {
      const v = new URLSearchParams(location.search).get(name) || fallback;
      return v;
    }
    function setParams(params) {
      const u = new URL(location);
      Object.entries(params).forEach(([k, v]) => {
        if (v === "" || v == null) u.searchParams.delete(k);
        else u.searchParams.set(k, v);
      });
      history.replaceState(null, "", u);
    }

    // cache refs
    const buttons = Array.from(document.querySelectorAll('.filter-btn'));
    const years   = Array.from(document.querySelectorAll('.year'));
    const lists   = Array.from(document.querySelectorAll('.show-list'));
    const sortSel = document.getElementById('sortOrder');
    const shows   = () => Array.from(document.querySelectorAll('.show-list .show'));

    // FILTER
    function applyFilter(tag) {
      buttons.forEach(b => b.classList.toggle('is-active', (b.dataset.filter || '') === tag));
      shows().forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').split(/\s+/);
        const match = !tag || tags.includes(tag);
        card.classList.toggle('hidden', !match);
      });
      lists.forEach((list, i) => {
        const visible = list.querySelectorAll('.show:not(.hidden)').length > 0;
        years[i].classList.toggle('hidden', !visible);
        list.classList.toggle('hidden', !visible);
      });
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tag = btn.dataset.filter || "";
        applyFilter(tag);
        setParams({ tag, sort: sortSel?.value || "newest" });
      });
    });

    // SORT
    function sortShows(order) {
      const dir = order === 'oldest' ? 1 : -1;
      lists.forEach(list => {
        const cards = Array.from(list.querySelectorAll('.show'));
        cards.sort((a, b) => {
          const da = new Date(a.getAttribute('data-date') || 0).getTime();
          const db = new Date(b.getAttribute('data-date') || 0).getTime();
          return (db - da) * (dir === -1 ? 1 : -1);
        });
        cards.forEach(c => list.appendChild(c));
      });
      const container = lists[0].parentElement;
      const groups = years.map((y, i) => ({ yearEl: y, listEl: lists[i] }));
      groups.sort((g1, g2) => {
        const top1 = g1.listEl.querySelector('.show');
        const top2 = g2.listEl.querySelector('.show');
        const d1 = top1 ? new Date(top1.getAttribute('data-date') || 0).getTime() : 0;
        const d2 = top2 ? new Date(top2.getAttribute('data-date') || 0).getTime() : 0;
        return (d2 - d1) * (dir === -1 ? 1 : -1);
      });
      groups.forEach(g => { container.appendChild(g.yearEl); container.appendChild(g.listEl); });
    }

    sortSel?.addEventListener('change', () => {
      const order = sortSel.value;
      sortShows(order);
      const activeBtn = document.querySelector('.filter-btn.is-active');
      const tag = activeBtn ? (activeBtn.getAttribute('data-filter') || '') : '';
      applyFilter(tag);
      setParams({ tag, sort: order });
    });

    // INITIAL: read URL params
    const initTag  = ALLOWED_TAGS.includes(getParam("tag", ""))   ? getParam("tag", "")   : "";
    const initSort = ALLOWED_SORTS.includes(getParam("sort","")) ? getParam("sort","newest") : "newest";

    if (sortSel) sortSel.value = initSort;
    sortShows(initSort);
    applyFilter(initTag);
    setParams({ tag: initTag, sort: initSort });
  </script>
  <button id="backToTop" title="Back to top">↑</button>
<script>
  const btn = document.getElementById("backToTop");
  window.addEventListener("scroll", () => {
    if (document.documentElement.scrollTop > 400) {
      btn.style.display = "block";
    } else {
      btn.style.display = "none";
    }
  });
  btn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  const yearButtons = Array.from(document.querySelectorAll('.year-btn'));

function applyFilters(tag, year) {
  // update button states
  buttons.forEach(b => b.classList.toggle('is-active', (b.dataset.filter || '') === tag));
  yearButtons.forEach(b => b.classList.toggle('is-active', (b.dataset.year || '') === year));

  shows().forEach(card => {
    const tags = (card.getAttribute('data-tags') || '').split(/\s+/);
    const showDate = new Date(card.getAttribute('data-date'));
    const showYear = showDate.getFullYear().toString();

    const tagMatch = !tag || tags.includes(tag);
    const yearMatch = !year || showYear === year;

    card.classList.toggle('hidden', !(tagMatch && yearMatch));
  });

  lists.forEach((list, i) => {
    const visible = list.querySelectorAll('.show:not(.hidden)').length > 0;
    years[i].classList.toggle('hidden', !visible);
    list.classList.toggle('hidden', !visible);
  });
}

// hook year buttons
yearButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    const tag = document.querySelector('.filter-btn.is-active')?.dataset.filter || '';
    const year = btn.dataset.year || '';
    applyFilters(tag, year);
    setParams({ tag, year, sort: sortSel?.value || "newest" });
  });
});

// adjust tag filter click to include year state
buttons.forEach(btn => {
  btn.addEventListener('click', () => {
    const tag = btn.dataset.filter || '';
    const year = document.querySelector('.year-btn.is-active')?.dataset.year || '';
    applyFilters(tag, year);
    setParams({ tag, year, sort: sortSel?.value || "newest" });
  });
});

// on load: restore from URL
const initYear = getParam("year", "");
applyFilters(initTag, initYear);
setParams({ tag: initTag, year: initYear, sort: initSort });

</script>

</body>
</html>
