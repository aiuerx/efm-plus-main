<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resources — EFM</title>
  <meta name="description" content="EFM resources: guides, sample packs, tools, hardware, and reading." />
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    :root {
      --bg:#0b0b0b; --fg:#f3f3f3; --muted:#bdbdbd; --card:#121212; --border:#2a2a2a; --header-h:66px;
      --accent:#39ff14; /* neon green highlight */
    }

    * { box-sizing: border-box; }
    html, body { height:100%; }
    html { scroll-behavior: smooth; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg); }
    .wrap { max-width:1100px; margin:0 auto; padding:24px; }

    /* Header */
    header {
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:18px 0; border-bottom:1px solid var(--border);
      position:sticky; top:0; backdrop-filter:saturate(120%) blur(6px); background:rgba(11,11,11,0.7); z-index:50;
    }
    .brand{display:flex;align-items:center;gap:12px;}
    .site-name{font-weight:700;font-size:20px;letter-spacing:.02em;line-height:1;}
    nav a{color:var(--muted);text-decoration:none;margin-left:16px;font-size:14px;}
    nav a:hover{color:var(--fg);}

    /* Anchor offset so sticky header doesn’t cover the title */
    .anchor { scroll-margin-top: calc(var(--header-h) + 20px); }

    /* Page layout */
    .hero{padding:40px 0 10px;}
    .title{font-size: clamp(28px, 5.5vw, 56px); line-height:1; letter-spacing:-.01em; margin:0;}
    .tag{color:var(--muted); font-size:15px; margin-top:10px; max-width:60ch;}

    /* Divider */
    .section-divider { height:1px; margin:20px 0; background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent); }

    /* TOC */
    .toc { display:flex; gap:14px; flex-wrap:wrap; margin:10px 0 6px; }
    .toc a { color:var(--muted); text-decoration:none; font-size:13px; padding:6px 10px; border:1px solid var(--border); border-radius:999px; background:#0f0f0f; }
    .toc a:hover { color:var(--fg); }
    .toc a.is-active { color:#111; background:#fff; border-color:#e6e6e6; }

    /* Controls */
    .controls{display:grid;grid-template-columns:1fr;gap:10px;margin:10px 0 10px;}
    @media (min-width:900px){ .controls{grid-template-columns:1fr auto;} }

    .search{width:100%; background:#121212; color:#f3f3f3; border:1px solid #2a2a2a; padding:10px 12px; border-radius:12px; font-size:14px;}
    .search::placeholder{color:#8a8a8a;}

    .filters{display:flex;flex-wrap:wrap;align-items:center;gap:8px;}
    .filter-label{font-size:14px;color:var(--muted);font-weight:600;}
    .pill{background:#121212;border:1px solid #2a2a2a;color:#f3f3f3;padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;transition:border-color .15s ease, background-color .15s ease;}
    .pill:hover{border-color:#3a3a3a;}
    .pill.is-active{background:#fff;color:#111;border-color:#e6e6e6;}

    /* Grid & cards */
    .grid{display:grid; gap:14px; margin-top:16px;}
    @media (min-width:900px){ .grid{grid-template-columns:1fr 1fr;} }

    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:18px;}
    .card h2{margin:0 0 10px; font-size:18px;}
    .card p{margin:0 0 10px; color:var(--muted); line-height:1.6;}
    .list{margin:0; padding:0; list-style:none; display:grid; gap:10px;}
    .item{display:flex; flex-direction:column; gap:4px; padding:12px; border:1px solid var(--border); border-radius:12px; background:#0f0f0f; transition:border-color .2s ease, transform .02s;}
    .item:hover{border-color:#3a3a3a; transform:translateY(-1px);}
    .item a{color:#f3f3f3; text-decoration:none;}
    .item a:hover{text-decoration:underline;}
    .meta{font-size:12px; color:var(--muted);}
    .tagpill{display:inline-block; font-size:11px; color:#111; background:#fff; border:1px solid #e6e6e6; border-radius:999px; padding:2px 8px; margin-left:8px;}

    .empty{margin:24px 0 0; color:var(--muted); font-size:14px; text-align:center;}

    footer{border-top:1px solid var(--border); margin-top:40px; padding:18px 0; color:var(--muted); font-size:12px;}

    .hidden{display:none !important;}

    /* Getting Started (compact via <details>) — ACCENTED */
    details.callout {
      border:1px solid var(--border);
      border-left:4px solid var(--accent);
      border-radius:12px;
      background:#111;
      padding:12px 14px;
      margin:14px 0;
    }
    details.callout > summary {
      display:flex; align-items:center; gap:8px; cursor:pointer;
      font-size:14px; color:var(--fg); list-style:none;
      padding:6px 10px;
      border-radius:8px;
      background: color-mix(in srgb, var(--accent) 12%, transparent);
    }
    /* Safari/FF default marker off */
    details.callout > summary::-webkit-details-marker { display:none; }
    details.callout > summary::marker { content:""; }

    .callout .chev { transition:transform .15s ease; font-size:12px; color:var(--muted); }
    details.callout[open] .chev { transform:rotate(90deg); }

    .callout-sub { color:var(--muted); font-size:13px; margin-left:auto; }
    details.callout > summary:hover {
      background: color-mix(in srgb, var(--accent) 18%, transparent);
    }
    details.callout > summary:focus-visible {
      outline:2px solid var(--accent);
      outline-offset:2px;
    }

    .callout-body { display:none; margin-top:10px; }
    details.callout[open] .callout-body { display:block; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand"><div class="site-name">EFM</div></div>
      <nav>
        <a href="/">Home</a>
        <a href="/radio">Radio</a>
        <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">Signal Notes</a>
        <a href="/#subscribe">Subscribe</a>
      </nav>
    </header>

    <main>
      <section class="hero">
        <h1 class="title">Resources</h1>
        <p class="tag">Guides, sample packs, tools, hardware, and reading I actually use. Minimal, practical, updated over time.</p>
      </section>

      <div class="section-divider"></div>

      <!-- Tiny TOC -->
      <nav class="toc">
        <a href="#guides">Guides</a>
        <a href="#samples">Sample packs</a>
        <a href="#tools">Tools</a>
        <a href="#hardware">Hardware</a>
        <a href="#reading">Reading</a>
      </nav>

      <!-- Controls -->
      <div class="controls">
        <input id="search" class="search" type="search" placeholder="Search titles, notes" />
        <div class="filters">
          <span class="filter-label">Filter:</span>
          <button class="pill is-active" data-cat="">All</button>
          <button class="pill" data-cat="guides">Guides</button>
          <button class="pill" data-cat="samples">Sample packs</button>
          <button class="pill" data-cat="tools">Tools</button>
          <button class="pill" data-cat="hardware">Hardware</button>
          <button class="pill" data-cat="reading">Reading</button>
        </div>
      </div>

      <!-- Getting Started (compact, collapsible, not tied to filters) -->
      <details class="callout" id="getting-started">
        <summary>
          <span class="chev">▶</span>
          <strong>New? Start here</strong>
          <span class="callout-sub">Synths, modular, Ableton, studio wiring</span>
        </summary>
        <div class="callout-body">
          <ul class="list">
            <li class="item">
              <a href="https://learningsynths.ableton.com" target="_blank" rel="noopener">Ableton’s Learning Synths</a>
              <div class="meta">Oscillators, filters, envelopes <span class="tagpill">beginner</span></div>
            </li>
            <li class="item">
              <a href="https://www.soundonsound.com/techniques/synthesizing-basics" target="_blank" rel="noopener">Synth Basics (Sound On Sound)</a>
              <div class="meta">Primer on subtractive synthesis <span class="tagpill">reading</span></div>
            </li>
            <li class="item">
              <a href="https://www.youtube.com/playlist?list=PLoh4MB-kbBmE4Zp3b1xq7i1WzWmVh0z0Z" target="_blank" rel="noopener">Ableton Live 101 (Official YouTube)</a>
              <div class="meta">Beginner series for Live <span class="tagpill">video</span></div>
            </li>
            <li class="item">
              <a href="https://www.youtube.com/watch?v=TYhK1zW55V4" target="_blank" rel="noopener">Loopop: Intro to Modular</a>
              <div class="meta">Signal flow & patching <span class="tagpill">video</span></div>
            </li>
            <li class="item">
              <a href="https://www.youtube.com/@LearningModular" target="_blank" rel="noopener">Learning Modular (Chris Meyer)</a>
              <div class="meta">Step-by-step modular basics <span class="tagpill">video</span></div>
            </li>
            <li class="item">
              <a href="https://bjooks.com/products/patch-tweak" target="_blank" rel="noopener">Patch &amp; Tweak (Book)</a>
              <div class="meta">Illustrated overview of modular <span class="tagpill">book</span></div>
            </li>
            <li class="item">
              <a href="https://www.soundonsound.com/techniques/choosing-using-cables" target="_blank" rel="noopener">Wiring a Home Studio (Sound On Sound)</a>
              <div class="meta">Cables, connections, grounding <span class="tagpill">studio</span></div>
            </li>
          </ul>
        </div>
      </details>

      <section class="grid" id="resource-grid">
        <!-- Guides -->
        <div class="card group" data-section="guides">
          <h2 id="guides" class="anchor">Guides</h2>
          <ul class="list">
            <li class="item" data-cat="guides" data-text="parallel fx chains delay into reverb routing patchbay live studio">
              <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">Parallel FX chains: delay → reverb without mud</a>
              <div class="meta">Routing • Patchbay • Live & studio <span class="tagpill">guide</span></div>
            </li>
            <li class="item" data-cat="guides" data-text="octatrack chord template 8 chords harmony elektron">
              <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">Octatrack chord template (8 chords in 4 bars)</a>
              <div class="meta">Elektron • Templates • Harmony <span class="tagpill">template</span></div>
            </li>
            <li class="item" data-cat="guides" data-text="dx100 clean sine operator notes fm yamaha sound design">
              <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">DX100: clean sine (no crunch) — operator notes</a>
              <div class="meta">FM • Yamaha • Sound design <span class="tagpill">patch</span></div>
            </li>
          </ul>
        </div>

        <!-- Sample Packs -->
        <div class="card group" data-section="samples">
          <h2 id="samples" class="anchor">Sample packs</h2>
          <ul class="list">
            <li class="item" data-cat="samples" data-text="efm pack 3 drums clicks clanks percussive hits textured tails">
              <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">EFM Pack #3 — Drums, clicks, clanks</a>
              <div class="meta">Percussive hits, textured tails, one-line usage notes <span class="tagpill">samples</span></div>
            </li>
            <li class="item" data-cat="samples" data-text="efm pack 2 noise beds risers ambience transitions">
              <a href="https://signalnotes.efm.plus" target="_blank" rel="noopener">EFM Pack #2 — Noise beds & risers</a>
              <div class="meta">Layerable ambience & transitions <span class="tagpill">samples</span></div>
            </li>
          </ul>
        </div>

        <!-- Tools -->
        <div class="card group" data-section="tools">
          <h2 id="tools" class="anchor">Tools</h2>
          <ul class="list">
            <li class="item" data-cat="tools" data-text="reaper daw speed stability">
              <a href="https://www.reaper.fm/" target="_blank" rel="noopener">REAPER</a>
              <div class="meta">DAW I reach for when I need speed/stability <span class="tagpill">software</span></div>
            </li>
            <li class="item" data-cat="tools" data-text="valhalla dsp reverbs delays">
              <a href="https://valhalladsp.com/" target="_blank" rel="noopener">Valhalla DSP</a>
              <div class="meta">Reverbs/delays that just work <span class="tagpill">fx</span></div>
            </li>
            <li class="item" data-cat="tools" data-text="audacity editor quick cuts batch jobs">
              <a href="https://www.audacityteam.org/" target="_blank" rel="noopener">Audacity</a>
              <div class="meta">Swiss-army editor for quick cuts & batch jobs <span class="tagpill">utility</span></div>
            </li>
          </ul>
        </div>

        <!-- Hardware -->
        <div class="card group" data-section="hardware">
          <h2 id="hardware" class="anchor">Favorite gear</h2>
          <ul class="list">
            <li class="item" data-cat="hardware" data-text="elektron octatrack performance sampler scenes crossfader">
              <a href="#" target="_blank" rel="noopener">Elektron Octatrack</a>
              <div class="meta">Performance sampler • Scenes, crossfader, mangling <span class="tagpill">hardware</span></div>
            </li>
            <li class="item" data-cat="hardware" data-text="yamaha dx100 fm synthesis small keyboard">
              <a href="#" target="_blank" rel="noopener">Yamaha DX100</a>
              <div class="meta">Tiny FM box with big personality <span class="tagpill">hardware</span></div>
            </li>
            <li class="item" data-cat="hardware" data-text="allen heath mixwizard mixer routing musical eq">
              <a href="#" target="_blank" rel="noopener">Allen & Heath MixWizard</a>
              <div class="meta">Hands-on routing, musical EQ <span class="tagpill">mixer</span></div>
            </li>
          </ul>
        </div>

        <!-- Reading / Links -->
        <div class="card group" data-section="reading" style="grid-column: 1 / -1;">
          <h2 id="reading" class="anchor">Reading & links</h2>
          <ul class="list">
            <li class="item" data-cat="reading" data-text="musicdsp audio dsp algorithms notes">
              <a href="https://www.musicdsp.org/en/latest/" target="_blank" rel="noopener">MusicDSP</a>
              <div class="meta">Algorithms & notes on audio DSP <span class="tagpill">reading</span></div>
            </li>
            <li class="item" data-cat="reading" data-text="ccrma stanford research resources">
              <a href="https://ccrma.stanford.edu/" target="_blank" rel="noopener">CCRMA</a>
              <div class="meta">Research & resources from Stanford CCRMA <span class="tagpill">reading</span></div>
            </li>
            <li class="item" data-cat="reading" data-text="valhalla blog reverb delay deep dives">
              <a href="https://valhalladsp.com/blog/" target="_blank" rel="noopener">Valhalla Blog</a>
              <div class="meta">Deep dives on reverb/delay design <span class="tagpill">reading</span></div>
            </li>
          </ul>
        </div>
      </section>

      <div id="empty" class="empty hidden">No results. Try a different filter or search.</div>
    </main>

    <footer>
      © <span id="year"></span> EFM.
      <br/>
      <span style="color:var(--muted); font-size:12px; display:inline-block; margin-top:6px;">
        💬 Do you have tips, suggestions, or something interesting to share?<br/>
        Get in touch: <a href="mailto:notes@efm.plus" style="color:var(--fg);">notes@efm.plus</a>
      </span>
    </footer>
  </div>

  <script>
    // year
    document.getElementById('year').textContent = new Date().getFullYear();

    const ALLOWED = ["", "guides", "samples", "tools", "hardware", "reading"];
    const pills   = Array.from(document.querySelectorAll('.pill'));
    const groups  = Array.from(document.querySelectorAll('.card.group'));
    const search  = document.getElementById('search');
    const empty   = document.getElementById('empty');
    const tocLinks = Array.from(document.querySelectorAll('.toc a'));

    const getParam = (k, fb) => {
      const v = new URLSearchParams(location.search).get(k);
      return (v === null || v === undefined) ? fb : v;
    };
    const setParams = (obj) => {
      const u = new URL(location);
      Object.entries(obj).forEach(([k, v]) => v ? u.searchParams.set(k, v) : u.searchParams.delete(k));
      history.replaceState(null, "", u);
    };
    const norm = (s) => (s || "").toLowerCase();

    function apply(cat, q) {
      const query = norm(q);
      let anyShown = false;

      pills.forEach(p => p.classList.toggle('is-active', (p.dataset.cat || '') === cat));
      tocLinks.forEach(link => link.classList.toggle('is-active', link.getAttribute('href') === `#${cat}`));

      groups.forEach(section => {
        const sectionType = section.getAttribute('data-section') || '';
        const items = Array.from(section.querySelectorAll('.item'));
        let visible = 0;
        items.forEach(item => {
          const itemCat = item.getAttribute('data-cat') || '';
          const text = norm(item.getAttribute('data-text')) + " " + norm(item.textContent);
          const show = (!cat || itemCat === cat || sectionType === cat) && (!query || text.includes(query));
          item.classList.toggle('hidden', !show);
          if (show) visible++;
        });
        section.classList.toggle('hidden', visible === 0);
        if (visible) anyShown = true;
      });

      empty.classList.toggle('hidden', anyShown);
    }

    // Pills: filter + (if a cat) scroll to the heading
    pills.forEach(btn => {
      btn.addEventListener('click', () => {
        const cat = btn.dataset.cat || '';
        const q = search.value.trim();
        apply(cat, q);
        setParams({ cat, q });
        if (cat) document.getElementById(cat)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // TOC: sync filter with section
    tocLinks.forEach(a => {
      a.addEventListener('click', () => {
        const id = a.getAttribute('href')?.slice(1) || '';
        requestAnimationFrame(() => {
          const pill = document.querySelector(`.pill[data-cat="${id}"]`) || document.querySelector('.pill[data-cat=""]');
          pill?.click();
        });
      });
    });

    // Search (debounced)
    let t = null;
    search.addEventListener('input', () => {
      clearTimeout(t);
      t = setTimeout(() => {
        const cat = document.querySelector('.pill.is-active')?.dataset.cat || '';
        const q = search.value.trim();
        apply(cat, q);
        setParams({ cat, q });
      }, 120);
    });

    // Init from URL
    const initCat = ALLOWED.includes(getParam("cat", "")) ? getParam("cat", "") : "";
    const initQ   = getParam("q", "");
    search.value = initQ;
    apply(initCat, initQ);
    setParams({ cat: initCat, q: initQ });

    // Remember Getting Started open/closed (progressive enhancement)
    (function(){
      const key = 'efm:getting-started:open';
      const el = document.getElementById('getting-started');
      if (!el) return;
      try {
        const saved = localStorage.getItem(key);
        if (saved === '1') el.setAttribute('open', 'open');
        el.addEventListener('toggle', () => {
          localStorage.setItem(key, el.open ? '1' : '0');
        });
      } catch(_) { /* ignore storage errors */ }
    })();
  </script>
</body>
</html>
